{"ast":null,"code":"var _jsxFileName = \"/home/durga/Sem_6/Web_Tech_2/Project/intra_mail/src/pages/Home.js\";\nimport React from \"react\";\nimport M from \"materialize-css\";\nimport SimplePortal from \"../components/SimplePortal\";\nimport { NavLink } from \"react-router-dom\";\nimport { Modal, Button, Dropdown, DropdownItem } from \"react-materialize\";\nconst trigger = /*#__PURE__*/React.createElement(Button, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 17\n  }\n}, \"Compose Mail\");\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.showModal = e => {\n      this.setState({\n        compose: !this.state.compose\n      });\n    };\n\n    this.state = {\n      compose: false,\n      display: \"notification\"\n    };\n  }\n\n  componentDidMount() {\n    // Auto initialize all the things!\n    var check = localStorage.getItem('token');\n\n    if (!check) {\n      alert(\"You have logged out\");\n      window.location.href = \"/login\";\n    }\n\n    M.AutoInit();\n\n    if (this.state.display == \"notification\") {\n      document.getElementById(\"display\").innerHTML = \"Initial\";\n    }\n\n    console.log();\n\n    function check_login_state() {\n      var sender_object = {\n        xhr: new XMLHttpRequest(),\n        send: function () {\n          const token = localStorage.getItem('token');\n          alert(\"Sending request\");\n          this.xhr.open(\"GET\", \"http://localhost:8080/users/checkLogged\", true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.setRequestHeader('Authorization', token);\n          this.xhr.send();\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status != 200) {\n              alert(\"Not logged in\");\n              alert(this.status);\n              window.location = '/login';\n            }\n          }\n        }\n      };\n      sender_object.send();\n    }\n\n    check_login_state();\n  }\n\n  render() {\n    function assignment_display() {\n      // Display all the Assignment Mails\n      //document.getElementById(\"display\").innerHTML = \"Assignment Change\";\n      var obj = {\n        xhr: new XMLHttpRequest(),\n        get_mails: function () {\n          const token = localStorage.getItem('token');\n          this.xhr.open(\"GET\", \"http://localhost:8080/mails/received?category=assignment\", true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.setRequestHeader('Authorization', token);\n          this.xhr.send();\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              console.log(\"Correct\");\n              const mails = JSON.parse(this.responseText);\n              console.log(mails);\n              console.log(this.responseText); //TODO mails is a list of mails\n            }\n          }\n        }\n      };\n      obj.get_mails();\n    }\n\n    function notification_display() {\n      //document.getElementById(\"display\").innerHTML = \"Notification Change\";\n      var obj = {\n        xhr: new XMLHttpRequest(),\n        get_mails: function () {\n          const token = localStorage.getItem('token');\n          this.xhr.open(\"GET\", \"http://localhost:8080/mails/received?category=notification\", true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.setRequestHeader('Authorization', token);\n          this.xhr.send();\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              console.log(\"Correct\");\n              const mails = JSON.parse(this.responseText); //TODO: mails is a list of mails for each mail create a div showing subject\n            }\n          }\n        }\n      };\n      obj.get_mails();\n    }\n\n    function send_mail() {\n      console.log(\"Sending MAil\");\n      console.log(document.getElementById(\"to_mail\").value);\n      console.log(document.getElementById(\"subject\").value);\n      console.log(document.getElementById(\"content\").value);\n      var mail_object = {\n        xhr: new XMLHttpRequest(),\n        mail_send: function () {\n          const token = localStorage.getItem('token');\n          this.xhr.open(\"POST\", \"http://localhost:8080/mails/post\", true);\n          this.xhr.onreadystatechange = this.callback;\n          let receiver = document.getElementById(\"to_mail\").value.split(',');\n          var content = {\n            receiver: receiver,\n            subject: document.getElementById(\"subject\").value,\n            body: document.getElementById(\"content\").value\n          };\n          console.log(\"Sending data\");\n          console.log(content);\n          this.xhr.send(JSON.stringify(content));\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 201) {\n              alert(\"Mail sent\");\n              window.location.href = \"/home\";\n            }\n\n            if (this.status == 500) {\n              alert(\"Internal Server Error\");\n              window.location.href = \"/home\";\n            }\n          }\n        }\n      };\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n      className: \"col s2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6 m2 offset-m1 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      header: \"Compose Mail\",\n      trigger: trigger,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s12 m5 offset-m3 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"validate\",\n      type: \"email\",\n      name: \"to_mail\",\n      id: \"to_mail\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"to_mail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    }, \"To:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"validate\",\n      type: \"text\",\n      name: \"subject\",\n      id: \"subject\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"subject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, \"Subject:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"validate\",\n      type: \"text\",\n      name: \"content\",\n      id: \"content\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, \"Content:\")), /*#__PURE__*/React.createElement(Button, {\n      onClick: send_mail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 19\n      }\n    }, \"Send Mail\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s8 m1 offset-m12 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      class: \"dropdown-trigger btn\",\n      href: \"#\",\n      \"data-target\": \"dropdown1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, \"Drop\"), /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"dropdown1\",\n      class: \"dropdown-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      to: \"/home\",\n      exact: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }\n    }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      to: \"/sent\",\n      exact: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }, \"Sent\")), /*#__PURE__*/React.createElement(\"li\", {\n      class: \"divider\",\n      tabindex: \"-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col m6 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      onClick: notification_display,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 19\n      }\n    }, \"Notification\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col m6 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      onClick: assignment_display,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 19\n      }\n    }, \"Assignment\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col m12 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      id: \"display\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }\n    }, \"Displaying\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col m12 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }\n    }, \"Displaying Each Individual Mail\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }, \"Diaply Mail which might be in the format of Subject and Content\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }, \"Hello How r u\"))))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/durga/Sem_6/Web_Tech_2/Project/intra_mail/src/pages/Home.js"],"names":["React","M","SimplePortal","NavLink","Modal","Button","Dropdown","DropdownItem","trigger","Home","Component","constructor","props","showModal","e","setState","compose","state","display","componentDidMount","check","localStorage","getItem","alert","window","location","href","AutoInit","document","getElementById","innerHTML","console","log","check_login_state","sender_object","xhr","XMLHttpRequest","send","token","open","onreadystatechange","callback","setRequestHeader","readyState","status","render","assignment_display","obj","get_mails","mails","JSON","parse","responseText","notification_display","send_mail","value","mail_object","mail_send","receiver","split","content","subject","body","stringify"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport M from \"materialize-css\";\nimport SimplePortal from \"../components/SimplePortal\";\nimport { NavLink } from \"react-router-dom\";\nimport { Modal, Button, Dropdown, DropdownItem } from \"react-materialize\";\n\nconst trigger = <Button>Compose Mail</Button>\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { compose: false, display: \"notification\" };\n\n  };\n  showModal = e => {\n    this.setState({ compose: !this.state.compose });\n  };\n\n  componentDidMount() {\n    // Auto initialize all the things!\n    var check = localStorage.getItem('token');\n    if (!check) {\n      alert(\"You have logged out\");\n      window.location.href = \"/login\";\n    }\n    M.AutoInit();\n    if (this.state.display == \"notification\") {\n      document.getElementById(\"display\").innerHTML = \"Initial\";\n    }\n    console.log();\n    function check_login_state() {\n      var sender_object = {\n        xhr: new XMLHttpRequest(),\n        send: function () {\n          const token = localStorage.getItem('token');\n          alert(\"Sending request\");\n          this.xhr.open(\"GET\", \"http://localhost:8080/users/checkLogged\", true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.setRequestHeader('Authorization',token);\n          this.xhr.send();\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status != 200) {\n              alert(\"Not logged in\");\n              alert(this.status);\n              window.location='/login';\n            }\n          }\n        }\n      }\n      sender_object.send();\n    }\n    check_login_state();\n  }\n  render() {\n    function assignment_display() {\n      // Display all the Assignment Mails\n      //document.getElementById(\"display\").innerHTML = \"Assignment Change\";\n      var obj = {\n        xhr: new XMLHttpRequest(),\n        get_mails: function () {\n          const token = localStorage.getItem('token');\n          this.xhr.open(\"GET\", \"http://localhost:8080/mails/received?category=assignment\", true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.setRequestHeader('Authorization',token);\n          this.xhr.send();\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              console.log(\"Correct\");\n              const mails = JSON.parse(this.responseText);\n              console.log(mails)\n              console.log(this.responseText)\n              //TODO mails is a list of mails\n            }\n          }\n        }\n      }\n      obj.get_mails();\n    }\n\n    function notification_display() {\n      //document.getElementById(\"display\").innerHTML = \"Notification Change\";\n      var obj = {\n        xhr: new XMLHttpRequest(),\n        get_mails: function () {\n          const token = localStorage.getItem('token');\n          this.xhr.open(\"GET\", \"http://localhost:8080/mails/received?category=notification\", true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.setRequestHeader('Authorization',token);\n          this.xhr.send();\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              console.log(\"Correct\");\n              const mails = JSON.parse(this.responseText);\n              //TODO: mails is a list of mails for each mail create a div showing subject\n            }\n          }\n        }\n      }\n      obj.get_mails();\n    }\n\n    function send_mail() {\n      console.log(\"Sending MAil\");\n      console.log(document.getElementById(\"to_mail\").value);\n      console.log(document.getElementById(\"subject\").value);\n      console.log(document.getElementById(\"content\").value);\n      var mail_object = {\n        xhr: new XMLHttpRequest(),\n        mail_send: function () {\n          const token = localStorage.getItem('token');\n          this.xhr.open(\"POST\", \"http://localhost:8080/mails/post\", true);\n          this.xhr.onreadystatechange = this.callback;\n          let receiver = document.getElementById(\"to_mail\").value.split(',');\n          var content = {\n            receiver: receiver,\n            subject: document.getElementById(\"subject\").value,\n            body: document.getElementById(\"content\").value\n          }\n          console.log(\"Sending data\");\n          console.log(content);\n          this.xhr.send(JSON.stringify(content));\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 201) {\n              alert(\"Mail sent\");\n              window.location.href = \"/home\";\n            }\n            if(this.status == 500){\n              alert(\"Internal Server Error\");\n              window.location.href = \"/home\";\n            }\n          }\n        }\n      }\n    }\n    return (\n\n      <>\n        <main className=\"col s2\">\n          <div className=\"row\">\n            <div className=\"col s6 m2 offset-m1 card center\">\n              <Modal header=\"Compose Mail\" trigger={trigger}>\n                <div className=\"col s12 m5 offset-m3 card center\">\n                  <div className=\"input-field col s12\">\n                    <input className=\"validate\" type=\"email\" name=\"to_mail\" id=\"to_mail\" required />\n                    <label for=\"to_mail\">To:</label>\n                  </div>\n\n                  <div className=\"input-field col s12\">\n                    <input className=\"validate\" type=\"text\" name=\"subject\" id=\"subject\" required />\n                    <label for=\"subject\">Subject:</label>\n                  </div>\n\n                  <div className=\"input-field col s12\">\n                    <input className=\"validate\" type=\"text\" name=\"content\" id=\"content\" required />\n                    <label for=\"content\">Content:</label>\n                  </div>\n\n                  <Button onClick={send_mail}>Send Mail</Button>\n                </div>\n              </Modal>\n            </div>\n            {/* <div className=\"col s6 m2 offset-m8 card center\">\n                <a class='dropdown-trigger btn' href='#' data-target='dropdown1'>Drop Me!</a>\n                  <ul id='dropdown1' class='dropdown-content'>\n                    <li><a href=\"#!\">one</a></li>\n                    <li><a href=\"#!\">two</a></li>\n                    <li class=\"divider\" tabindex=\"-1\"></li>\n                    <li><a href=\"#!\">three</a></li>\n                    <li><a href=\"#!\"><i class=\"material-icons\">view_module</i>four</a></li>\n                    <li><a href=\"#!\"><i class=\"material-icons\">cloud</i>five</a></li>\n                  </ul>\n                </div> */}\n            <div className=\"col s8\">\n              {/* <div className=\"col s3 m1 offset-m12 card center\">\n                <h6>\n                  <NavLink to=\"/sent\" exact>\n                    Sent\n                  </NavLink>\n                </h6>\n                </div> */}\n              <div className=\"col s8 m1 offset-m12 card center\">\n                <a class='dropdown-trigger btn' href='#' data-target='dropdown1'>Drop</a>\n                <ul id='dropdown1' class='dropdown-content'>\n                  <li>\n                    <NavLink to=\"/home\" exact>\n                      Home\n                      </NavLink>\n                  </li>\n                  <li>\n                    <NavLink to=\"/sent\" exact>\n                      Sent\n                      </NavLink>\n                  </li>\n                  <li class=\"divider\" tabindex=\"-1\"></li>\n\n\n                </ul>\n              </div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col s6\">\n              <div className=\"col m6 card center\">\n                <h5>\n                  <a href=\"#\" onClick={notification_display}>Notification</a>\n                </h5>\n              </div>\n              <div className=\"col m6 card center\">\n                <h5>\n                  <a href=\"#\" onClick={assignment_display}>Assignment</a>\n                </h5>\n              </div>\n\n              <div className=\"col m12 card center\">\n                <h5 id=\"display\">Displaying</h5>\n              </div>\n            </div>\n            <div className=\"col s6\">\n              <div className=\"col m12 card center\">\n                <p>Displaying Each Individual Mail</p>\n                <p>Diaply Mail which might be in the format of Subject and Content</p>\n                <p>Hello How r u</p>\n              </div>\n            </div>\n\n          </div>\n        </main>\n\n      </>\n    );\n  }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}