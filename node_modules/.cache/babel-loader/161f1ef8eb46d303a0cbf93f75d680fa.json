{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GAURAV C G\\\\Desktop\\\\Work\\\\intra_mail\\\\src\\\\pages\\\\sent.js\";\nimport React from \"react\";\nimport \"materialize-css\";\nimport M from \"materialize-css\";\nimport { DatePicker } from \"react-materialize\";\nimport { NavLink } from \"react-router-dom\";\nimport { Modal, Button } from \"react-materialize\";\nconst trigger = /*#__PURE__*/React.createElement(Button, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 17\n  }\n}, \"Compose Mail\");\n\nclass Sent extends React.Component {\n  componentDidMount() {\n    var check = localStorage.getItem('token');\n\n    if (!check) {\n      window.location.href = \"/login\";\n    }\n\n    function assignment_get() {\n      // Display all the Assignment Mails\n      //document.getElementById(\"display\").innerHTML = \"Assignment Change\";\n      console.log(\"assignment get called\");\n      var obj = {\n        xhr: new XMLHttpRequest(),\n        get_mails: function () {\n          const token = localStorage.getItem('token');\n          this.xhr.open(\"GET\", \"http://localhost:8080/mails/sent\", true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.setRequestHeader('Authorization', token);\n          this.xhr.send();\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              console.log(\"Correct\");\n              const mails = JSON.parse(this.responseText);\n              console.log(mails);\n              console.log(this.responseText); //TODO mails is a list of mails\n\n              var response = [{\n                \"receiver\": [\"user2\"],\n                \"readBy\": [],\n                \"_id\": \"5e95afce99bc312288633f48\",\n                \"sender\": \"user1\",\n                \"timeSent\": \"2020-04-14T12:42:54.386Z\",\n                \"subject\": \"subject2\",\n                \"body\": \"body2\",\n                \"category\": \"assignment\",\n                \"mailId\": 10000,\n                \"__v\": 0\n              }]; //TODO: mails is a list of mails for each mail create a div showing subject\n\n              add_mails(\"display_ass\", response);\n            }\n\n            if (this.status == 401) {\n              alert(\"Token Expired! You are being logged out\");\n              window.location = '/logout';\n            }\n          }\n        }\n      };\n      obj.get_mails();\n    }\n\n    ; // Auto initialize all the things!\n\n    M.AutoInit();\n  }\n\n  render() {\n    function send_mail() {\n      console.log(\"Sending MAil\");\n      console.log(document.getElementById(\"to_mail\").value);\n      console.log(document.getElementById(\"subject\").value);\n      console.log(document.getElementById(\"content\").value);\n      var mail_object = {\n        xhr: new XMLHttpRequest(),\n        mail_send: function () {\n          const token = localStorage.getItem('token');\n          this.xhr.open(\"POST\", \"http://localhost:8080/mails/post\", true);\n          this.xhr.onreadystatechange = this.callback;\n          let receiver = document.getElementById(\"to_mail\").value.split(',');\n          var content = {\n            receiver: receiver,\n            subject: document.getElementById(\"subject\").value,\n            body: document.getElementById(\"content\").value\n          };\n          console.log(\"Sending data\");\n          console.log(content);\n          this.xhr.send(JSON.stringify(content));\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 201) {\n              alert(\"Mail sent\");\n              window.location.href = \"/sent\";\n            }\n\n            if (this.status == 500) {\n              alert(\"Internal Server Error\");\n              window.location.href = \"/sent\";\n            }\n\n            if (this.status == 401) {\n              alert(\"Token Expired! You are being logged out\");\n              window.location = '/logout';\n            }\n          }\n        }\n      };\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n      className: \"col s2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6 m2 offset-m1 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      header: \"Compose Mail\",\n      trigger: trigger,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s12 m5 offset-m3 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"validate\",\n      type: \"text\",\n      name: \"to_mail\",\n      id: \"to_mail\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"to_mail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, \"To:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"validate\",\n      type: \"text\",\n      name: \"subject\",\n      id: \"subject\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"subject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }\n    }, \"Subject:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"validate\",\n      type: \"text\",\n      name: \"content\",\n      id: \"content\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }, \"Content:\")), /*#__PURE__*/React.createElement(Button, {\n      onClick: send_mail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }\n    }, \"Send Mail\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s8 m1 offset-m12 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      class: \"dropdown-trigger btn\",\n      href: \"#\",\n      \"data-target\": \"dropdown1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, \"Drop\"), /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"dropdown1\",\n      class: \"dropdown-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      to: \"/sent\",\n      exact: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 23\n      }\n    }, \"Sent\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      to: \"/home\",\n      exact: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 23\n      }\n    }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n      class: \"divider\",\n      tabindex: \"-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col m12 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 15\n      }\n    }, \"Sent\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col m12 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      id: \"display\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, \"Displaying\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col m12 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, \"Displaying Each Individual Mail\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }, \"Diaply Mail which might be in the format of Subject and Content\"))))));\n  }\n\n}\n\nexport default Sent;","map":{"version":3,"sources":["C:/Users/GAURAV C G/Desktop/Work/intra_mail/src/pages/sent.js"],"names":["React","M","DatePicker","NavLink","Modal","Button","trigger","Sent","Component","componentDidMount","check","localStorage","getItem","window","location","href","assignment_get","console","log","obj","xhr","XMLHttpRequest","get_mails","token","open","onreadystatechange","callback","setRequestHeader","send","readyState","status","mails","JSON","parse","responseText","response","add_mails","alert","AutoInit","render","send_mail","document","getElementById","value","mail_object","mail_send","receiver","split","content","subject","body","stringify"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"materialize-css\";\r\nimport M from \"materialize-css\";\r\nimport { DatePicker } from \"react-materialize\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Modal, Button } from \"react-materialize\";\r\n\r\nconst trigger = <Button>Compose Mail</Button>\r\n\r\nclass Sent extends React.Component {\r\n  componentDidMount() {\r\n    var check = localStorage.getItem('token');\r\n    if (!check) {\r\n      window.location.href = \"/login\";\r\n    }\r\n    function assignment_get() {\r\n      // Display all the Assignment Mails\r\n      //document.getElementById(\"display\").innerHTML = \"Assignment Change\";\r\n      console.log(\"assignment get called\");\r\n      var obj = {\r\n        xhr: new XMLHttpRequest(),\r\n        get_mails: function () {\r\n          const token = localStorage.getItem('token');\r\n          this.xhr.open(\"GET\", \"http://localhost:8080/mails/sent\", true);\r\n          this.xhr.onreadystatechange = this.callback;\r\n          this.xhr.setRequestHeader('Authorization', token);\r\n          this.xhr.send();\r\n        },\r\n        callback: function () {\r\n          if (this.readyState == 4) {\r\n            if (this.status == 200) {\r\n              console.log(\"Correct\");\r\n              const mails = JSON.parse(this.responseText);\r\n              console.log(mails)\r\n              console.log(this.responseText)\r\n              //TODO mails is a list of mails\r\n              var response = [\r\n                {\r\n                  \"receiver\": [\r\n                    \"user2\"\r\n                  ],\r\n                  \"readBy\": [],\r\n                  \"_id\": \"5e95afce99bc312288633f48\",\r\n                  \"sender\": \"user1\",\r\n                  \"timeSent\": \"2020-04-14T12:42:54.386Z\",\r\n                  \"subject\": \"subject2\",\r\n                  \"body\": \"body2\",\r\n                  \"category\": \"assignment\",\r\n                  \"mailId\": 10000,\r\n                  \"__v\": 0\r\n                }\r\n              ]\r\n  \r\n              //TODO: mails is a list of mails for each mail create a div showing subject\r\n              add_mails(\"display_ass\", response);\r\n            }\r\n            if(this.status == 401){\r\n              alert(\"Token Expired! You are being logged out\");\r\n              window.location = '/logout';\r\n            }\r\n          }\r\n        }\r\n      }\r\n      obj.get_mails();\r\n    };\r\n\r\n    // Auto initialize all the things!\r\n    M.AutoInit();\r\n  }\r\n  render() {\r\n    function send_mail() {\r\n      console.log(\"Sending MAil\");\r\n      console.log(document.getElementById(\"to_mail\").value);\r\n      console.log(document.getElementById(\"subject\").value);\r\n      console.log(document.getElementById(\"content\").value);\r\n      var mail_object = {\r\n        xhr: new XMLHttpRequest(),\r\n        mail_send: function () {\r\n          const token = localStorage.getItem('token');\r\n          this.xhr.open(\"POST\", \"http://localhost:8080/mails/post\", true);\r\n          this.xhr.onreadystatechange = this.callback;\r\n          let receiver = document.getElementById(\"to_mail\").value.split(',');\r\n          var content = {\r\n            receiver: receiver,\r\n            subject: document.getElementById(\"subject\").value,\r\n            body: document.getElementById(\"content\").value\r\n          }\r\n          console.log(\"Sending data\");\r\n          console.log(content);\r\n          this.xhr.send(JSON.stringify(content));\r\n        },\r\n        callback: function () {\r\n          if (this.readyState == 4) {\r\n            if (this.status == 201) {\r\n              alert(\"Mail sent\");\r\n              window.location.href = \"/sent\";\r\n            }\r\n            if (this.status == 500) {\r\n              alert(\"Internal Server Error\");\r\n              window.location.href = \"/sent\";\r\n            }\r\n            if (this.status == 401){\r\n              alert(\"Token Expired! You are being logged out\");\r\n              window.location = '/logout';\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return (\r\n      <>\r\n        <main className=\"col s2\">\r\n          <div className=\"row\">\r\n          <div className=\"col s6 m2 offset-m1 card center\">\r\n                <Modal header=\"Compose Mail\" trigger={trigger}>\r\n                <div className=\"col s12 m5 offset-m3 card center\">\r\n                  <div className=\"input-field col s12\">\r\n                    <input className=\"validate\" type=\"text\" name=\"to_mail\" id=\"to_mail\" required />\r\n                    <label for=\"to_mail\">To:</label>\r\n                  </div>\r\n\r\n                  <div className=\"input-field col s12\">\r\n                    <input className=\"validate\" type=\"text\" name=\"subject\" id=\"subject\" required />\r\n                    <label for=\"subject\">Subject:</label>\r\n                  </div>\r\n\r\n                  <div className=\"input-field col s12\">\r\n                    <input className=\"validate\" type=\"text\" name=\"content\" id=\"content\" required />\r\n                    <label for=\"content\">Content:</label>\r\n                  </div>\r\n\r\n                  <Button onClick={send_mail}>Send Mail</Button>\r\n                </div>\r\n                </Modal>\r\n              </div>\r\n              <div className=\"col s8\">\r\n                {/* <div className=\"col s3 m1 offset-m12 card center\">\r\n                <h6>\r\n                  <NavLink to=\"/sent\" exact>\r\n                    Sent\r\n                  </NavLink>\r\n                </h6>\r\n                </div> */}\r\n                <div className=\"col s8 m1 offset-m12 card center\">\r\n                <a class='dropdown-trigger btn' href='#' data-target='dropdown1'>Drop</a>\r\n                  <ul id='dropdown1' class='dropdown-content'>\r\n                    <li> \r\n                      <NavLink to=\"/sent\" exact>\r\n                        Sent\r\n                      </NavLink>\r\n                    </li>\r\n                    <li>\r\n                      <NavLink to=\"/home\" exact>\r\n                        Home\r\n                      </NavLink>\r\n                    </li>\r\n                    <li class=\"divider\" tabindex=\"-1\"></li>\r\n                    \r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              </div>\r\n              <div className=\"row\">\r\n            <div className=\"col s6\">\r\n              <div className=\"col m12 card center\">\r\n              <h5>\r\n              Sent\r\n              </h5>\r\n              </div>                \r\n            <div className=\"col m12 card center\">\r\n                <h5 id=\"display\">Displaying</h5>\r\n            </div>\r\n            </div>\r\n            <div className=\"col s6\">\r\n              <div className=\"col m12 card center\">\r\n              <p>Displaying Each Individual Mail</p>\r\n                <p>Diaply Mail which might be in the format of Subject and Content</p>\r\n              </div>\r\n            </div>\r\n            \r\n          </div>\r\n        </main>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Sent;"]},"metadata":{},"sourceType":"module"}