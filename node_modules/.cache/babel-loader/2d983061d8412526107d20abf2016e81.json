{"ast":null,"code":"var _jsxFileName = \"/home/durga/Sem_6/Web_Tech_2/Project/intra_mail/src/pages/Login.js\";\nimport React from \"react\";\nimport M from \"materialize-css\";\n\nclass Login extends React.Component {\n  componentDidMount() {\n    // Auto initialize all the things!\n    M.AutoInit();\n\n    function check_login_state() {\n      var sender_object = {\n        xhr: new XMLHttpRequest(),\n        send: function () {\n          this.xhr.open(\"POST\", \"http://localhost:8080/api/login\", true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.withCredentials = true;\n          this.xhr.send();\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 202) {\n              alert(\"You are already logged in\");\n              window.location.href = \"/dashboard\";\n            }\n\n            if (this.status == 403) {\n              alert(\"User not found\");\n              document.cookie = \"username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              document.cookie = \"loginstring=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              window.location.href = \"/login\";\n            }\n\n            if (this.status == 401) {\n              alert(\"incorrect password\");\n              document.cookie = \"username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              document.cookie = \"loginstring=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              window.location.href = \"/login\";\n            }\n\n            if (this.status == 204) {\n              //not yet logged in. no problem.\n              document.cookie = \"username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              document.cookie = \"loginstring=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              console.log(\"Login Again\");\n            }\n          }\n        }\n      };\n      sender_object.send();\n    }\n\n    check_login_state();\n  }\n\n  render() {\n    var url = \"http://localhost:4000\";\n\n    function attempt_login() {\n      var md5 = require('../../../node_modules/md5');\n\n      var sender_object = {\n        xhr: new XMLHttpRequest(),\n        send: function () {\n          this.xhr.open(\"POST\", url + \"/api/uac/v1/login\", true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.withCredentials = true;\n          let data = new FormData();\n          data.append(\"username\", document.getElementById(\"username\").value);\n          data.append(\"password\", md5(document.getElementById(\"password\").value));\n          console.log(data);\n          this.xhr.send(data);\n        },\n        callback: function () {\n          if (this.readyState == 4) {\n            if (this.status == 202) {\n              alert(\"Successful login\");\n              window.location.href = \"/dashboard\";\n            }\n\n            if (this.status == 403) {\n              alert(\"User not found\");\n            }\n\n            if (this.status == 401) {\n              alert(\"Unauthorized, incorrect password\");\n            }\n\n            if (this.status == 400) {\n              alert(\"Please fill data\");\n            }\n          }\n        }\n      };\n      sender_object.send();\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n      className: \"valign-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s12 m10 offset-m1 card center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"validate\",\n      type: \"text\",\n      name: \"username\",\n      id: \"username\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, \"Username\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"validate\",\n      type: \"password\",\n      name: \"password\",\n      id: \"password\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, \"Password\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-small green waves-effect\",\n      onClick: attempt_login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, \"Login\")))));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/home/durga/Sem_6/Web_Tech_2/Project/intra_mail/src/pages/Login.js"],"names":["React","M","Login","Component","componentDidMount","AutoInit","check_login_state","sender_object","xhr","XMLHttpRequest","send","open","onreadystatechange","callback","withCredentials","readyState","status","alert","window","location","href","document","cookie","console","log","render","url","attempt_login","md5","require","data","FormData","append","getElementById","value","LoginForm"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,iBAAd;;AAEA,MAAMC,KAAN,SAAoBF,KAAK,CAACG,SAA1B,CAAoC;AAClCC,EAAAA,iBAAiB,GAAG;AAClB;AACAH,IAAAA,CAAC,CAACI,QAAF;;AACA,aAASC,iBAAT,GAA4B;AAC1B,UAAIC,aAAa,GAAG;AAClBC,QAAAA,GAAG,EAAE,IAAIC,cAAJ,EADa;AAElBC,QAAAA,IAAI,EAAC,YAAU;AACb,eAAKF,GAAL,CAASG,IAAT,CAAc,MAAd,EAAqB,iCAArB,EAAuD,IAAvD;AACA,eAAKH,GAAL,CAASI,kBAAT,GAA8B,KAAKC,QAAnC;AACA,eAAKL,GAAL,CAASM,eAAT,GAA2B,IAA3B;AACA,eAAKN,GAAL,CAASE,IAAT;AACD,SAPiB;AAQlBG,QAAAA,QAAQ,EAAC,YAAU;AACjB,cAAI,KAAKE,UAAL,IAAmB,CAAvB,EAAyB;AACvB,gBAAI,KAAKC,MAAL,IAAe,GAAnB,EAAuB;AACrBC,cAAAA,KAAK,CAAC,2BAAD,CAAL;AACAC,cAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,YAAvB;AACD;;AACD,gBAAI,KAAKJ,MAAL,IAAe,GAAnB,EAAuB;AACrBC,cAAAA,KAAK,CAAC,gBAAD,CAAL;AACAI,cAAAA,QAAQ,CAACC,MAAT,GAAkB,2DAAlB;AACAD,cAAAA,QAAQ,CAACC,MAAT,GAAkB,8DAAlB;AACAJ,cAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,QAArB;AACD;;AACD,gBAAG,KAAKJ,MAAL,IAAe,GAAlB,EAAsB;AACpBC,cAAAA,KAAK,CAAC,oBAAD,CAAL;AACAI,cAAAA,QAAQ,CAACC,MAAT,GAAkB,2DAAlB;AACAD,cAAAA,QAAQ,CAACC,MAAT,GAAkB,8DAAlB;AACAJ,cAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,QAArB;AACD;;AACD,gBAAI,KAAKJ,MAAL,IAAe,GAAnB,EAAuB;AACrB;AACAK,cAAAA,QAAQ,CAACC,MAAT,GAAkB,2DAAlB;AACAD,cAAAA,QAAQ,CAACC,MAAT,GAAkB,8DAAlB;AACAC,cAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACD;AACF;AACF;AAjCiB,OAApB;AAmCAjB,MAAAA,aAAa,CAACG,IAAd;AACD;;AACDJ,IAAAA,iBAAiB;AAClB;;AACDmB,EAAAA,MAAM,GAAG;AACP,QAAIC,GAAG,GAAG,uBAAV;;AACA,aAASC,aAAT,GAAwB;AACtB,UAAIC,GAAG,GAAGC,OAAO,CAAC,2BAAD,CAAjB;;AACA,UAAItB,aAAa,GAAG;AAClBC,QAAAA,GAAG,EAAE,IAAIC,cAAJ,EADa;AAElBC,QAAAA,IAAI,EAAC,YAAU;AACb,eAAKF,GAAL,CAASG,IAAT,CAAc,MAAd,EAAqBe,GAAG,GAAC,mBAAzB,EAA6C,IAA7C;AACA,eAAKlB,GAAL,CAASI,kBAAT,GAA8B,KAAKC,QAAnC;AACA,eAAKL,GAAL,CAASM,eAAT,GAA2B,IAA3B;AACA,cAAIgB,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,UAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAuBX,QAAQ,CAACY,cAAT,CAAwB,UAAxB,EAAoCC,KAA3D;AACAJ,UAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAuBJ,GAAG,CAACP,QAAQ,CAACY,cAAT,CAAwB,UAAxB,EAAoCC,KAArC,CAA1B;AACAX,UAAAA,OAAO,CAACC,GAAR,CAAYM,IAAZ;AACA,eAAKtB,GAAL,CAASE,IAAT,CAAcoB,IAAd;AACD,SAXiB;AAYlBjB,QAAAA,QAAQ,EAAC,YAAU;AACjB,cAAI,KAAKE,UAAL,IAAmB,CAAvB,EAAyB;AACvB,gBAAI,KAAKC,MAAL,IAAe,GAAnB,EAAuB;AACrBC,cAAAA,KAAK,CAAC,kBAAD,CAAL;AACAC,cAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,YAAvB;AACC;;AAEL,gBAAI,KAAKJ,MAAL,IAAe,GAAnB,EAAuB;AACrBC,cAAAA,KAAK,CAAC,gBAAD,CAAL;AACD;;AACD,gBAAG,KAAKD,MAAL,IAAe,GAAlB,EAAsB;AACpBC,cAAAA,KAAK,CAAC,kCAAD,CAAL;AACD;;AACD,gBAAG,KAAKD,MAAL,IAAe,GAAlB,EAAsB;AACpBC,cAAAA,KAAK,CAAC,kBAAD,CAAL;AACD;AACA;AACF;AA7BiB,OAApB;AA+BAV,MAAAA,aAAa,CAACG,IAAd;AACD;;AACD,wBACE,uDACE;AAAM,MAAA,SAAS,EAAC,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,UADZ;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,IAAI,EAAC,UAHP;AAIE,MAAA,EAAE,EAAC,UAJL;AAKE,MAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE;AAAO,MAAA,GAAG,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARF,CAFF,eAaE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,UADZ;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,IAAI,EAAC,UAHP;AAIE,MAAA,EAAE,EAAC,UAJL;AAKE,MAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE;AAAO,MAAA,GAAG,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARF,CAbF,eAuBE;AAAQ,MAAA,SAAS,EAAC,kCAAlB;AAAqD,MAAA,OAAO,EAAEiB,aAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAvBF,CADF,CADF,CADF,CADF;AAmCD;;AApHiC;;AAuHpC,eAAeQ,SAAf","sourcesContent":["import React from \"react\";\nimport M from \"materialize-css\";\n\nclass Login extends React.Component {\n  componentDidMount() {\n    // Auto initialize all the things!\n    M.AutoInit();\n    function check_login_state(){\n      var sender_object = {\n        xhr: new XMLHttpRequest(),\n        send:function(){\n          this.xhr.open(\"POST\",\"http://localhost:8080/api/login\",true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.withCredentials = true;\n          this.xhr.send();\n        },\n        callback:function(){\n          if (this.readyState == 4){\n            if (this.status == 202){\n              alert(\"You are already logged in\");\n              window.location.href = \"/dashboard\";\n            }\n            if (this.status == 403){\n              alert(\"User not found\");\n              document.cookie = \"username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              document.cookie = \"loginstring=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              window.location.href=\"/login\";\n            }\n            if(this.status == 401){\n              alert(\"incorrect password\");\n              document.cookie = \"username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              document.cookie = \"loginstring=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              window.location.href=\"/login\";\n            }\n            if (this.status == 204){\n              //not yet logged in. no problem.\n              document.cookie = \"username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              document.cookie = \"loginstring=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n              console.log(\"Login Again\");\n            }\n          }\n        }\n      }\n      sender_object.send();\n    }\n    check_login_state();\n  }\n  render() {\n    var url = \"http://localhost:4000\"\n    function attempt_login(){\n      var md5 = require('../../../node_modules/md5');\n      var sender_object = {\n        xhr: new XMLHttpRequest(),\n        send:function(){\n          this.xhr.open(\"POST\",url+\"/api/uac/v1/login\",true);\n          this.xhr.onreadystatechange = this.callback;\n          this.xhr.withCredentials = true;\n          let data = new FormData();\n          data.append(\"username\",document.getElementById(\"username\").value);\n          data.append(\"password\",md5(document.getElementById(\"password\").value));\n          console.log(data);\n          this.xhr.send(data);\n        },\n        callback:function(){\n          if (this.readyState == 4){\n            if (this.status == 202){\n              alert(\"Successful login\");\n              window.location.href = \"/dashboard\";\n              }\n          \n          if (this.status == 403){\n            alert(\"User not found\");\n          }\n          if(this.status == 401){\n            alert(\"Unauthorized, incorrect password\");\n          }\n          if(this.status == 400){\n            alert(\"Please fill data\");\n          }\n          }\n        }\n      }\n      sender_object.send();\n    }\n    return (\n      <>\n        <main className=\"valign-wrapper\">\n          <div className=\"row\">\n            <div className=\"col s12 m10 offset-m1 card center\">\n              <h5>Login</h5>\n              <div className=\"input-field col s12\">\n                <input\n                  className=\"validate\"\n                  type=\"text\"\n                  name=\"username\"\n                  id=\"username\"\n                  required\n                />\n                <label for=\"email\">Username</label>\n              </div>\n\n              <div className=\"input-field col s12\">\n                <input\n                  className=\"validate\"\n                  type=\"password\"\n                  name=\"password\"\n                  id=\"password\"\n                  required\n                />\n                <label for=\"password\">Password</label>\n              </div>\n              <button className=\"btn btn-small green waves-effect\" onClick={attempt_login}>\n                Login\n              </button>\n            </div>\n          </div>\n        </main>\n      </>\n    );\n  }\n}\n\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}